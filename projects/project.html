<!DOCTYPE html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <!-- Use this block if using media queries
    <meta content='width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;' name='viewport' />
    -->

    <title>Scott Jensen Design</title>
    <meta name="description" content="" />
    <link rel="icon" type="image/png" href="favicon.png">

    <!-- iTunes App Link 
    <meta name="apple-itunes-app" content="app-id=55555555">
    -->

    <!-- Homescreen Bookmark Icon
    <link rel="apple-touch-icon-precomposed" href="sample-icon.png"/>
    -->

    <link rel="stylesheet" href="../css/reset.css" />
    <link rel="stylesheet" href="../css/preloader.css" type="text/css">
    <link rel="stylesheet" href="../css/base.css" />

    
    <!-- Load Jquery -->
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>

    <script type="text/javascript" src="../js/portfolio.js"></script>

    <script>

    $(document).ready(function(){
        var slideCounter = 0;
        var imagesLoaded = 0;
        var iframeHeight = $(window).height();
        var userInteraction = false;
        var galleryVisible = false;
        $('#full-project').height($(window).height());
        $('#full-project').preloader(displayGallery);

        // function to show gallery when loaded
        function displayGallery() {
             if(userInteraction == false){
                    $('#project-info').css('bottom', '0px');
             }
        };

        // size the images in the gallery
        function sizeGallery() {
            var viewWidth = $(window).width();
            var viewHeight = $(window).height();
            var viewRatio = viewWidth / viewHeight;

            if(viewWidth > 768){
                $('.project-image').each(function(){
                    var imageWidth = $(this).width();
                    var imageHeight = $(this).height();
                    var imageRatio = imageWidth / imageHeight;

                    // for height
                    if (imageRatio > viewRatio) {
                        $(this).css('height', viewHeight + 'px');
                        $(this).css('width', viewHeight * imageRatio + 'px'); 
                        var leftOffset = -(($(this).width() - viewWidth) / 2);
                        $(this).css('margin-left', leftOffset + 'px'); 
                        
                        //var topOffset = -((imageHeight - viewHeight) / 2);
                        //$(this).css('margin-top', topOffset + 'px');  

                    }
                    // for width
                    else if (imageRatio < viewRatio) {
                        $(this).css('width', viewWidth + 'px');
                        $(this).css('height', viewWidth / imageRatio + 'px');
                        var topOffset = -(($(this).height() - viewHeight) / 2);
                        $(this).css('margin-top', topOffset + 'px');
                    }

                });
            }

            //displayGallery();
            galleryVisible = true;

        };

        //count the images in the gallery
        $('.project-image').each(function(){
            slideCounter++;
        });
        //check for load on each image
        $('.project-image').each(function(){
            $(this).load(function(){
                imagesLoaded++;

                if(imagesLoaded == slideCounter) {
                    sizeGallery();
                }
            })
            
        });
        // fallback if load isn't called
        setTimeout(function(){
            if (galleryVisible == false){
                sizeGallery();  
            }
        }, 3000);

        function hideDescription() {
            var boxHeight = $('#project-info').height();
            var titleOffset = $('h1').height();
            var hideValue = -(boxHeight - titleOffset) + 30;
            $('#project-info').css('bottom', hideValue + 'px');
        };

        // carousel

        $('.slide').css('left', '100%');
        $('#slide1').css('left', '0');

        var currentSlide = 1;
        function nextSlide() {
            if(currentSlide == slideCounter){
                upcomingSlide = '#slide1';
                mainSlide = '#slide' + currentSlide;
                currentSlide = 1;
            }
            else {
                upcomingSlide = '#slide' + (currentSlide + 1);
                mainSlide = '#slide' + currentSlide; 
                currentSlide ++;
            }
            $(upcomingSlide).css('left', '100%');
            $(upcomingSlide).fadeTo(0, 1)
            $(mainSlide).fadeTo(200, .3, function(){
                $(mainSlide).animate({
                    left : '-100%'
                }, 400);
                $(upcomingSlide).animate({
                    left : '0%'
                }, 400);
             });

        }
        function prevSlide() {
            if(currentSlide == 1){
                upcomingSlide = '#slide' + slideCounter;
                mainSlide = '#slide' + currentSlide;
                currentSlide = slideCounter;
            }
            else {
                upcomingSlide = '#slide' + (currentSlide - 1);
                mainSlide = '#slide' + currentSlide; 
                currentSlide --;
            }
            $(upcomingSlide).css('left', '-100%');
            $(upcomingSlide).fadeTo(0, 1)
            $(mainSlide).fadeTo(200, .3, function(){
                $(mainSlide).animate({
                    left : '100%'
                }, 400);
                $(upcomingSlide).animate({
                    left : '0%'
                }, 400);
             });

        }


        $('#next-btn').click(function(){
            hideDescription();
            nextSlide();
            userInteraction = true;
        });
        $('#prev-btn').click(function(){
            hideDescription();
            prevSlide();
            userInteraction = true;
        });
        $('#project-info').mouseenter(function(){
            $(this).css('bottom', '0');
        });

        $('.related-project').click(function(){
            window.top.location.href = 'file:///Users/Scott/Sites/www/portfolio/index.html#' + this.id + '-gallery';

        });

        $(window).resize(sizeGallery);

        module();


    });

    </script>

    <!--[if IE]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--> 

</head>
<body class="project-page">
<header id="site-header">
    <div class="wrap">
        <div id="logo">
            <div class="logo-1"></div>
            <div class="logo-2"></div>
            <div class="logo-3"></div>
            <div class="logo-4"></div>
        </div>
        <h1 id="wordmark">Scott Jensen <span>Design</span></h1>
        <nav id="site-nav">
            <ul id="main-nav">    
                <li><a class="black-btn work-nav selected">Work</a></li>
                <li><a href="../writing.html" class="black-btn writing-nav">Writing</a></li>
                <li><a href="../about.html" class="black-btn about-nav">About</a></li>
                <li><a href="../contact.html" class="black-btn contact-nav module-link">Contact</a></li>
            </ul>
        </nav>
    </div>
</header>
<div id="full-project">
    <article id="project-info">

        <h1>CCA Trade show</h1>
        <div class="project-details">
            <h4>Client:</h4>
            <p>Neutron Interactive</p>
            <h4>Media:</h4>
            <p>Identity, Web, Print</p>
            <p>
                Praesent id metus massa, ut blandit odio. Proin quis tortor orci. Etiam at risus et justo dignissim congue. Donec congue lacinia dui.
            </p>
           
        </div>
        <div class="related-projects-box">
            <h4>Related Projects:</h4>
            <ul id="related-projects">
                <li><a href="http://betacrumb.com" id="project1" class="related-project"><img src="../images/thumbnail.png" alt="thumbnail"></a></li>
                <li><a href="http://betacrumb.com" id="project2" class="related-project"><img src="../images/thumbnail.png" alt="thumbnail"></a></li>
            </ul>
        </div>

    </article>
    <!--
    <div id="load-wrapper">
        <div id="animation-block">
            <div class="bar1"><div class="bar"></div></div>
            <div class="bar2"><div class="bar"></div></div>
            <div class="bar3"><div class="bar"></div></div>
        </div>
        <span class="loading">Loading</span>
    </div>
-->

    <ul id="project-slides">
        <li id="slide1" class="slide"><img src="../images/project-image.jpg" alt="Project Image" class="project-image" /></li>
        <li id="slide2" class="slide"><img src="../images/project-image2.jpg" alt="Project Image" class="project-image" /></li>
        <li id="slide3" class="slide"><img src="../images/project-image.jpg" alt="Project Image" class="project-image" /></li>
        <li id="slide4" class="slide"><img src="../images/project-image2.jpg" alt="Project Image" class="project-image" /></li>
    </ul>

    <div id="next-btn"></div>
    <div id="prev-btn"></div>
</div>
    

</body>
</html>